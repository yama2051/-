<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.employee.mapper.EmployeeMapper">

	<resultMap id="EmployeeResultMap" type="com.example.employee.entity.EmployeeEntity">
		<id column="employee_id" property="employeeId"></id>
		<result column="last_name" property="lastName"></result>
		<result column="first_name" property="firstName"></result>
		<result column="status" property="status"></result>
		<result column="delete_flg" property="deleteFlg"></result>
		<result column="created_at" property="createdAt"></result>
		<result column="updated_at" property="updatedAt"></result>
	</resultMap>
	
	<!--検索用（全件取得）-->
	<select	id="findAll" resultMap="EmployeeResultMap">
		SELECT 
        	* FROM 
        employee
    	<where>
       	 delete_flg = '0'

        <if test="employeeId != null and employeeId != ''">
            AND employee_id = #{employeeId}
        </if>

        <if test="lastName != null and lastName != ''">
            AND last_name LIKE CONCAT('%', #{lastName}, '%')
        </if>

        <if test="departmentId != null and departmentId != ''">
            AND department_id = #{departmentId}
        </if>
    </where>
	</select>
	
	<!--登録用-->
	<insert id="registMem">
		INSERT EMPLOYEE(employee_id,last_name,first_name,status,delete_flg,created_at,updated_at)
		VALUES(#{employeeId},#{lastName},#{firstName},#{status},#{deleteFlg},#{createdAt},#{updatedAt})
	</insert>
	


</mapper>
